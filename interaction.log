 * Serving Flask app 'app' (lazy loading)
 * Environment: development
 * Debug mode: on
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Restarting with stat
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 899-591-340
INFO:root:CRM INSTANCE CREATING ...
INFO:root:self._client_exists(action='crm.contact.list') running ...
INFO:root:	self._validate(step=0) running ...
INFO:root:	self._validate(step=1) running ...
INFO:root:	self._validate(step=1) self._validated_success=True
INFO:root:	self._api(operation='crm.contact.list', params=None)
INFO:root:	self._api() self._bx_responce={'contacts': []}
INFO:root:self._client_exists(False)

INFO:root:self._create() Creating new entity='client' ...
INFO:root:	self._bind_client_with_deal(client_exist=False) running ...
INFO:root:	self._api(operation='crm.contact.add', params="{'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}")
INFO:root:	self._api() self._bx_responce={'contacts': [{'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}]}
INFO:root:	self._api(operation='crm.deal.add', params="{'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato'], 'delivery_adress': 'st. Mira, 211, Ekaterinburg', 'delivery_date': '2021-01-01:16:00', 'delivery_code': '#232nkF3fAdn'}")
INFO:root:	self._api() self._bx_responce={'deal': [{'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato'], 'delivery_adress': 'st. Mira, 211, Ekaterinburg', 'delivery_date': '2021-01-01:16:00', 'delivery_code': '#232nkF3fAdn'}]}
INFO:root:self._create() self._bx_errors=None

INFO:werkzeug:127.0.0.1 - - [18/Oct/2021 03:04:40] "POST / HTTP/1.1" 200 -
INFO:root:CRM INSTANCE CREATING ...
INFO:root:self._client_exists(action='crm.contact.list') running ...
INFO:root:	self._validate(step=0) running ...
INFO:root:	self._validate(step=1) running ...
INFO:root:	self._validate(step=1) self._validated_success=True
INFO:root:	self._api(operation='crm.contact.list', params=None)
INFO:root:	self._api() self._bx_responce={'contacts': [{'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}]}
INFO:root:self._client_exists(True): {'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}

INFO:root:self._update() Updating entity='None' ...
INFO:root:self._deal_exists(action='crm.deal.list') running ...
INFO:root:	self._api(operation='crm.deal.list', params=None)
INFO:root:	self._api() self._bx_responce={'deal': [{'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato'], 'delivery_adress': 'st. Mira, 211, Ekaterinburg', 'delivery_date': '2021-01-01:16:00', 'delivery_code': '#232nkF3fAdn'}]}
INFO:root:self._deal_exists(True) {'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato'], 'delivery_adress': 'st. Mira, 211, Ekaterinburg', 'delivery_date': '2021-01-01:16:00', 'delivery_code': '#232nkF3fAdn'}

INFO:root:self._update() Updating entity='deal' ...
INFO:werkzeug:127.0.0.1 - - [18/Oct/2021 03:04:40] "POST / HTTP/1.1" 200 -
INFO:root:CRM INSTANCE CREATING ...
INFO:root:self._client_exists(action='crm.contact.list') running ...
INFO:root:	self._validate(step=0) running ...
INFO:root:	self._validate(step=1) running ...
INFO:root:	self._validate(step=1) self._validated_success=True
INFO:root:	self._api(operation='crm.contact.list', params=None)
INFO:root:	self._api() self._bx_responce={'contacts': [{'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}]}
INFO:root:self._client_exists(True): {'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}

INFO:root:self._update() Updating entity='None' ...
INFO:root:self._deal_exists(action='crm.deal.list') running ...
INFO:root:	self._api(operation='crm.deal.list', params=None)
INFO:root:	self._api() self._bx_responce={'deal': [{'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato'], 'delivery_adress': 'st. Mira, 211, Ekaterinburg', 'delivery_date': '2021-01-01:16:00', 'delivery_code': '#232nkF3fAdn'}]}
INFO:root:self._deal_exists(True) {'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato'], 'delivery_adress': 'st. Mira, 211, Ekaterinburg', 'delivery_date': '2021-01-01:16:00', 'delivery_code': '#232nkF3fAdn'}

INFO:root:self._update() Updating entity='deal' ...
INFO:root:	self._update_fields() running ...
INFO:root:	self._api(operation='crm.deal.update', params="{'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato', 'Cheese'], 'delivery_adress': 'st. Mira, 221, Ekaterinburg', 'delivery_date': '2021-01-01:20:00', 'delivery_code': '#232nkF3fAdn'}")
INFO:root:	self._api() self._bx_responce={'deal': [{'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato', 'Cheese'], 'delivery_adress': 'st. Mira, 221, Ekaterinburg', 'delivery_date': '2021-01-01:20:00', 'delivery_code': '#232nkF3fAdn'}]}
INFO:root:self._update_fields() None
INFO:werkzeug:127.0.0.1 - - [18/Oct/2021 03:04:40] "POST / HTTP/1.1" 200 -
INFO:root:CRM INSTANCE CREATING ...
INFO:root:self._client_exists(action='crm.contact.list') running ...
INFO:root:	self._validate(step=0) running ...
INFO:root:	self._validate(step=1) running ...
INFO:root:	self._validate(step=1) self._validated_success=True
INFO:root:	self._api(operation='crm.contact.list', params=None)
INFO:root:	self._api() self._bx_responce={'contacts': [{'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}]}
INFO:root:self._client_exists(False)

INFO:root:self._create() Creating new entity='client' ...
INFO:root:	self._bind_client_with_deal(client_exist=False) running ...
INFO:root:	self._api(operation='crm.contact.add', params="{'name': 'fj', 'surname': 'fj', 'phone': '+66677777777', 'adress': 'Forks', 'deal': ['#232nkF3ffoo']}")
INFO:root:	self._api() self._bx_responce={'contacts': [{'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}, {'id': 2, 'name': 'fj', 'surname': 'fj', 'phone': '+66677777777', 'adress': 'Forks', 'deal': ['#232nkF3ffoo']}]}
INFO:root:	self._api(operation='crm.deal.add', params="{'title': 'title', 'description': 'Some description', 'client': {'name': 'fj', 'surname': 'fj', 'phone': '+66677777777', 'adress': 'Forks'}, 'products': ['Wine', 'Coffee', 'Fresh Blood'], 'delivery_adress': 'st. Mira, 212, Ekaterinburg', 'delivery_date': '2021-01-02:00:00', 'delivery_code': '#232nkF3ffoo'}")
INFO:root:	self._api() self._bx_responce={'deal': [{'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato', 'Cheese'], 'delivery_adress': 'st. Mira, 221, Ekaterinburg', 'delivery_date': '2021-01-01:20:00', 'delivery_code': '#232nkF3fAdn'}, {'id': 2, 'title': 'title', 'description': 'Some description', 'client': {'name': 'fj', 'surname': 'fj', 'phone': '+66677777777', 'adress': 'Forks'}, 'products': ['Wine', 'Coffee', 'Fresh Blood'], 'delivery_adress': 'st. Mira, 212, Ekaterinburg', 'delivery_date': '2021-01-02:00:00', 'delivery_code': '#232nkF3ffoo'}]}
INFO:root:self._create() self._bx_errors=None

INFO:werkzeug:127.0.0.1 - - [18/Oct/2021 03:04:40] "POST / HTTP/1.1" 200 -
INFO:root:CRM INSTANCE CREATING ...
INFO:root:self._client_exists(action='crm.contact.list') running ...
INFO:root:	self._validate(step=0) running ...
INFO:root:	self._validate(step=1) running ...
INFO:root:	self._validate(step=1) self._validated_success=True
INFO:root:	self._api(operation='crm.contact.list', params=None)
INFO:root:	self._api() self._bx_responce={'contacts': [{'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}, {'id': 2, 'name': 'fj', 'surname': 'fj', 'phone': '+66677777777', 'adress': 'Forks', 'deal': ['#232nkF3ffoo']}]}
INFO:root:self._client_exists(True): {'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn']}

INFO:root:self._update() Updating entity='None' ...
INFO:root:self._deal_exists(action='crm.deal.list') running ...
INFO:root:	self._api(operation='crm.deal.list', params=None)
INFO:root:	self._api() self._bx_responce={'deal': [{'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato', 'Cheese'], 'delivery_adress': 'st. Mira, 221, Ekaterinburg', 'delivery_date': '2021-01-01:20:00', 'delivery_code': '#232nkF3fAdn'}, {'id': 2, 'title': 'title', 'description': 'Some description', 'client': {'name': 'fj', 'surname': 'fj', 'phone': '+66677777777', 'adress': 'Forks'}, 'products': ['Wine', 'Coffee', 'Fresh Blood'], 'delivery_adress': 'st. Mira, 212, Ekaterinburg', 'delivery_date': '2021-01-02:00:00', 'delivery_code': '#232nkF3ffoo'}]}
INFO:root:self._deal_exists(False) {}

INFO:root:self._create() Creating new entity='deal' ...
INFO:root:self._update() Updating entity='client' ...
INFO:root:	self._bind_client_with_deal(client_exist=True) running ...
INFO:root:	self._api(operation='crm.contact.update', params="{'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn', '#232nkF3fbar']}")
INFO:root:	self._api() self._bx_responce={'contacts': [{'id': 1, 'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow', 'deal': ['#232nkF3fAdn', '#232nkF3fbar']}, {'id': 2, 'name': 'fj', 'surname': 'fj', 'phone': '+66677777777', 'adress': 'Forks', 'deal': ['#232nkF3ffoo']}]}
INFO:root:	self._api(operation='crm.deal.add', params="{'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Milk'], 'delivery_adress': 'st. Mira, 211, Ekaterinburg', 'delivery_date': '2021-01-01:16:00', 'delivery_code': '#232nkF3fbar'}")
INFO:root:	self._api() self._bx_responce={'deal': [{'id': 1, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Candy', 'Carrot', 'Potato', 'Cheese'], 'delivery_adress': 'st. Mira, 221, Ekaterinburg', 'delivery_date': '2021-01-01:20:00', 'delivery_code': '#232nkF3fAdn'}, {'id': 2, 'title': 'title', 'description': 'Some description', 'client': {'name': 'fj', 'surname': 'fj', 'phone': '+66677777777', 'adress': 'Forks'}, 'products': ['Wine', 'Coffee', 'Fresh Blood'], 'delivery_adress': 'st. Mira, 212, Ekaterinburg', 'delivery_date': '2021-01-02:00:00', 'delivery_code': '#232nkF3ffoo'}, {'id': 3, 'title': 'title', 'description': 'Some description', 'client': {'name': 'Jon', 'surname': 'Karter', 'phone': '+77777777777', 'adress': 'st. Mira, 287, Moscow'}, 'products': ['Milk'], 'delivery_adress': 'st. Mira, 211, Ekaterinburg', 'delivery_date': '2021-01-01:16:00', 'delivery_code': '#232nkF3fbar'}]}
INFO:root:self._create() self._bx_errors=None

INFO:werkzeug:127.0.0.1 - - [18/Oct/2021 03:04:40] "POST / HTTP/1.1" 200 -
INFO:root:CRM INSTANCE CREATING ...
INFO:root:self._client_exists(action='crm.contact.list') running ...
INFO:root:	self._validate(step=0) running ...
ERROR:root:	self._validate(step=0) raises KeyError('client')
INFO:root:	self._validate(step=0) self._validated_success=False
INFO:root:self._create() Creating new entity='client' ...
INFO:root:self._create() self._internal_errors={'Error': 'KeyError', 'Error description': "'client'"}
INFO:werkzeug:127.0.0.1 - - [18/Oct/2021 03:04:40] "POST / HTTP/1.1" 200 -
INFO:werkzeug: * Detected change in '/mnt/c/dev/fj-fj-fj/bx/src/tests.py', reloading
INFO:werkzeug: * Restarting with stat
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 899-591-340
INFO:werkzeug: * Detected change in '/mnt/c/dev/fj-fj-fj/bx/src/interaction.py', reloading
INFO:werkzeug: * Restarting with stat
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 899-591-340
